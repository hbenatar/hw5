<!doctype html>
<html>

<head>
  <title> Amicable Numbers </title> 
  <meta name="viewport" content="width=device-width, initial-scale=1" />
</head>

<body>

  <h1>Amicable Numbers</h1>

  <form>
    <input type="number" name="num1" id="num1" required="1"><br /><br />
    <input type="number" name="num2" id="num2" required="1"><br /><br />
    <input type="submit" id="submit" value="Submit"><br /><br />
	</form>

  <div id="amicable"></div>

  <script>

    function isAFactor(x,y) {
      return y % x == 0
    }

    function findFactors(x) {
      var factors = [];
      for (n = 1; n < x; n++)
        if (isAFactor(n,x)) factors.push(n);
      return factors;
    }

    function arraySum(x) {
      var sum = 0;
      x.forEach (number => sum += number);
      return sum;
    }

    // window.onload= function() {
    //   var button = document.getElementById("submit");
    //   button.onclick = amicableCheck;
    // }

    var button = document.getElementById("submit");
    button.addEventListener("click", amicableCheck);

    function amicableCheck() {
      var num1 = document.getElementById("num1").value;
      var num2 = document.getElementById("num2").value;
      var response = "The numbers: " + num1 + " and " + num2 + " are ";

      console.log(response);

      var factors1 = findFactors(num1);
      var factors2 = findFactors(num2);

      console.log("factors 1 " + factors1);
      console.log("factors 2 " + factors2);

      var sum1 = arraySum(factors1);
      var sum2 = arraySum(factors2);

      console.log("sum 1 " + sum1);
      console.log("sum 2 " + sum2);

      if ((sum1 == num2) && (sum2 == num1)) {
        document.getElementById("amicable").innerHTML = response + "amicable";
        console.log("yes");
      }
        
      else {
        document.getElementById("amicable").innerHTML = response + "not amicable";
        console.log("no");
      }
    }

  </script>
  
</body>

</html>